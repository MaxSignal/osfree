# RegMath, math libraries for Regina
# Copyright 1998-2001 Patrick TJ McPhee
# Distributed under the terms of the Mozilla Public Licence
# You can obtain a copy of the licence at http://www.mozilla.org/MPL
# The Original Code is regmath
# The Initial Developer is Patrick TJ McPhee
# $Header: C:/ptjm/rexx/math/tmp/RCS/Makefile.emx 1.2 2001/11/04 19:08:35 ptjm Exp $

# Makefile for emx environment under OS/2

# pick the first value for a larger library that doesn't require emx
#SYSLIBS=-Zsys -Zso
# pick the second for a smaller one which uses the emx libraries
SYSLIBS=-Zcrtdll

CFLAGS=-O2 -fomit-frame-pointer -fstrength-reduce -pipe -Zdll -Zomf $(SYSLIBS)
LDFLAGS=-Zdll -Zomf $(SYSLIBS)
LIBS=-lm
LIBFILE=rexxmath.dll
CC=gcc
DEF=rexxmath.def

# object files
OBJS=rexxmath.obj

all : $(LIBFILE) rxmath.dll

$(LIBFILE) : $(OBJS)
	$(CC) $(LDFLAGS) $(OBJS) $(DEF) $(LIBS) -o $(LIBFILE)

rexxmath.obj : rexxmath.c
	$(CC) $(CFLAGS) -c rexxmath.c

rxmath.dll : rxmath.obj
	$(CC) $(LDFLAGS) rxmath.obj rxmath.def $(LIBS) -o rxmath.dll

rxmath.obj : rxmath.c
	$(CC) $(CFLAGS) -c rxmath.c

clean:
	-rm *.obj *.dll

